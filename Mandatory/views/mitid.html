<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hangy</title>
</head>
<body id = "app">

    <nav>
        <a href="/">Home</a>
        <a href="/about-us">About us</a>
        <a href="/contact-us">Contact us</a>
    </nav>

    <main>
        <iframe 
        src="https://mitid.eu.pythonanywhere.com/" 
        frameborder="0"
        style="height: 18rem"
        target = "_blank"
        
        >
    </iframe>
    </main>

</body>
</html>

<script>
    /*
    JWT
    CPR
    {
      "cpr":"1",
      "iat":1000,
      "exp":1600
    }
    */

    window.addEventListener('message', function(e) {
        console.log(e)
        var jwt_res

        // POST request using fetch()
        fetch("http://127.0.0.1:3333/jwt_mitid", {
            
            // Adding method type
            method: "POST",
            
            // Adding body or contents to send
            body: JSON.stringify({
                jwt: e.data
            }),
            
            // Adding headers to the request
            headers: {
                "Content-type": "application/json; charset=UTF-8"
            }
        })
        .then(redirect => window.location.replace("http://127.0.0.1:3333/jwt"));
    }, true)

</script>